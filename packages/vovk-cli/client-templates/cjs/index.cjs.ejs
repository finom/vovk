<%- `// auto-generated by Vovk.ts ${new Date().toISOString()}` %>
const { fetcher } = require('<%= t.imports.fetcher %>');
const { createRPC } = require('<%= t.imports.createRPC %>');
const { schema } = require('./schema.cjs');
const { validateOnClient = null } = <%- t.imports.validateOnClient ? `require('${t.imports.validateOnClient}')` : '{}'%>;
<% Object.values(t.schema.segments).filter((segment) => segment.emitSchema).forEach((segment) => { 
  Object.keys(segment.controllers).forEach((rpcModuleName) => { %>
exports.<%= rpcModuleName %> = createRPC(
  schema, '<%= segment.segmentName %>', '<%= rpcModuleName %>',
  { fetcher, validateOnClient, <%- typeof t.segmentMeta[segment.segmentName].segmentNameOverride === 'string' ? `segmentNameOverride: '${t.segmentMeta[segment.segmentName].segmentNameOverride}', ` : '' %>defaultOptions: { apiRoot: '<%= segment.segmentApiRoot ?? t.apiRoot %>' } }
);
  <% })
}) %>
exports.schema = schema;