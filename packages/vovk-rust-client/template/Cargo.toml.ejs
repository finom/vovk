[package]
name = "<%= t.package.name.replace(/-/g, '_') %>"
version = "<%= t.package.version %>"
<% if (t.package.description) { %>
description = "<%= t.package.description %>"
<% } %>
<% if (t.package.license) { %>
license = "<%= t.package.license || 'UNLICENSED' %>"
<% } %>
<% if (t.package.repository) { %>
repository = "<%= typeof t.package.repository === 'string' ? t.package.repository : t.package.repository.url %>"
<% } %>
<% if (t.package.homepage) { %>
homepage = "<%= t.package.homepage %>"
<% } %>
<% 
let authors = [];
if (t.package.author) {
  if (typeof t.package.author === 'string') {
    authors.push(t.package.author);
  } else {
    let author = t.package.author.name;
    if (t.package.author.email) author += ` <${t.package.author.email}>`;
    authors.push(author);
  }
}
if (t.package.contributors && t.package.contributors.length) {
  t.package.contributors.forEach(contributor => {
    if (typeof contributor === 'string') {
      authors.push(contributor);
    } else {
      let contribStr = contributor.name;
      if (contributor.email) contribStr += ` <${contributor.email}>`;
      authors.push(contribStr);
    }
  });
}
%>
<% if (authors.length) { %>
authors = <%- JSON.stringify(authors) %>
<% } %>
<% if (t.package.keywords && t.package.keywords.length) { %>
keywords = <%- JSON.stringify(t.package.keywords) %>
<% } %>
edition = "2021"

<% if (t.package.bugs) { %>
[package.metadata.package]
bugs = "<%= typeof t.package.bugs === 'string' ? t.package.bugs : t.package.bugs.url %>"
<% } %>

[dependencies]
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
reqwest = { version = "0.11", features = ["blocking", "json"] }
jsonschema = "0.17"
urlencoding = "2.1"
once_cell = "1.17"